name: 'Vieclam24h Daily Scraper'

on:
  workflow_dispatch:
  schedule:
    # Ch·∫°y 4 l·∫ßn m·ªói ng√†y, l·ªách 2 gi·ªù so v·ªõi TopCV
    - cron: '0 2,7,12,19 * * *'

jobs:
  scrape-vieclam24h:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: 'Checkout repository'
        uses: actions/checkout@v4

      - name: 'Set up Node.js'
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: 'Install project dependencies'
        run: npm install

      - name: 'Run Vieclam24h Scraper'
        run: node vieclam24h-scraper.js # <-- S·ª≠a t√™n file script

      - name: 'Commit results to repository'
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "üìä D·ªØ li·ªáu Vieclam24h: Th√™m file d·ªØ li·ªáu m·ªõi"
          file_pattern: "data/vieclam24h_*.csv" # <-- S·ª≠a m·∫´u file
